<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="css/leaflet.css">
        <link rel="stylesheet" href="css/L.Control.Layers.Tree.css">
        <link rel="stylesheet" href="css/qgis2web.css">
        <link rel="stylesheet" href="css/fontawesome-all.min.css">
        <link rel="stylesheet" href="css/leaflet.photon.css">
        <style>
        html, body, #map {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
        }
        </style>
        <title></title>
    </head>
    <body>
        <div id="map">
        </div>
        <script src="js/qgis2web_expressions.js"></script>
        <script src="js/leaflet.js"></script>
        <script src="js/L.Control.Layers.Tree.min.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="js/leaflet.photon.js"></script>
        <script src="data/AccesosporcluesterNET_1.js"></script>
        <script>
        var highlightLayer;
        function highlightFeature(e) {
            highlightLayer = e.target;

            if (e.target.feature.geometry.type === 'LineString' || e.target.feature.geometry.type === 'MultiLineString') {
              highlightLayer.setStyle({
                color: 'rgba(255, 255, 0, 1.00)',
              });
            } else {
              highlightLayer.setStyle({
                fillColor: 'rgba(255, 255, 0, 1.00)',
                fillOpacity: 1
              });
            }
        }
        var map = L.map('map', {
            zoomControl:false, maxZoom:28, minZoom:1
        }).fitBounds([[-4.5015892211158075,-88.67348400218978],[14.444566352867815,-56.01440593964609]]);
        var hash = new L.Hash(map);
        map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
        var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});
        // remove popup's row if "visible-with-data"
        function removeEmptyRowsFromPopupContent(content, feature) {
         var tempDiv = document.createElement('div');
         tempDiv.innerHTML = content;
         var rows = tempDiv.querySelectorAll('tr');
         for (var i = 0; i < rows.length; i++) {
             var td = rows[i].querySelector('td.visible-with-data');
             var key = td ? td.id : '';
             if (td && td.classList.contains('visible-with-data') && feature.properties[key] == null) {
                 rows[i].parentNode.removeChild(rows[i]);
             }
         }
         return tempDiv.innerHTML;
        }
        // modify popup if contains media
        function addClassToPopupIfMedia(content, popup) {
            var tempDiv = document.createElement('div');
            tempDiv.innerHTML = content;
            var imgTd = tempDiv.querySelector('td img');
            if (imgTd) {
                var src = imgTd.getAttribute('src');
                if (/\.(jpg|jpeg|png|gif|bmp|webp|avif)$/i.test(src)) {
                    popup._contentNode.classList.add('media');
                    setTimeout(function() {
                        popup.update();
                    }, 10);
                } else if (/\.(mp3|wav|ogg|aac)$/i.test(src)) {
                    var audio = document.createElement('audio');
                    audio.controls = true;
                    audio.src = src;
                    imgTd.parentNode.replaceChild(audio, imgTd);
                    popup._contentNode.classList.add('media');
                    setTimeout(function() {
                        popup.setContent(tempDiv.innerHTML);
                        popup.update();
                    }, 10);
                } else if (/\.(mp4|webm|ogg|mov)$/i.test(src)) {
                    var video = document.createElement('video');
                    video.controls = true;
                    video.src = src;
                    video.style.width = "400px";
                    video.style.height = "300px";
                    video.style.maxHeight = "60vh";
                    video.style.maxWidth = "60vw";
                    imgTd.parentNode.replaceChild(video, imgTd);
                    popup._contentNode.classList.add('media');
                    // Aggiorna il popup quando il video carica i metadati
                    video.addEventListener('loadedmetadata', function() {
                        popup.update();
                    });
                    setTimeout(function() {
                        popup.setContent(tempDiv.innerHTML);
                        popup.update();
                    }, 10);
                } else {
                    popup._contentNode.classList.remove('media');
                }
            } else {
                popup._contentNode.classList.remove('media');
            }
        }
        var zoomControl = L.control.zoom({
            position: 'topleft'
        }).addTo(map);
        var bounds_group = new L.featureGroup([]);
        function setBounds() {
        }
        map.createPane('pane_GoogleMaps_0');
        map.getPane('pane_GoogleMaps_0').style.zIndex = 400;
        var layer_GoogleMaps_0 = L.tileLayer('https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}', {
            pane: 'pane_GoogleMaps_0',
            opacity: 1.0,
            attribution: '',
            minZoom: 1,
            maxZoom: 28,
        });
        layer_GoogleMaps_0;
        map.addLayer(layer_GoogleMaps_0);
        function pop_AccesosporcluesterNET_1(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['fid'] !== null ? autolinker.link(String(feature.properties['fid']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['MpCodigo'] !== null ? autolinker.link(String(feature.properties['MpCodigo']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['MpNombre'] !== null ? autolinker.link(String(feature.properties['MpNombre']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Depto'] !== null ? autolinker.link(String(feature.properties['Depto']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Mercado'] !== null ? autolinker.link(String(feature.properties['Mercado']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <th scope="row">Plaza</th>\
                        <td class="visible-with-data" id="Plaza">' + (feature.properties['Plaza'] !== null ? autolinker.link(String(feature.properties['Plaza']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['MUNICIPIO'] !== null ? autolinker.link(String(feature.properties['MUNICIPIO']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['DEPARTAMENTO'] !== null ? autolinker.link(String(feature.properties['DEPARTAMENTO']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_Empresas'] !== null ? autolinker.link(String(feature.properties['Num_Empresas']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Accesos_Totales'] !== null ? autolinker.link(String(feature.properties['Accesos_Totales']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Vel_Down_Promedio'] !== null ? autolinker.link(String(feature.properties['Vel_Down_Promedio']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Vel_Up_Promedio'] !== null ? autolinker.link(String(feature.properties['Vel_Up_Promedio']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Accesos_Fibra'] !== null ? autolinker.link(String(feature.properties['Accesos_Fibra']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Porc_Fibra'] !== null ? autolinker.link(String(feature.properties['Porc_Fibra']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Latencia_Promedio'] !== null ? autolinker.link(String(feature.properties['Latencia_Promedio']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Latencia_Display'] !== null ? autolinker.link(String(feature.properties['Latencia_Display']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Tecnologia_Moda'] !== null ? autolinker.link(String(feature.properties['Tecnologia_Moda']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Cluster_Predominante'] !== null ? autolinker.link(String(feature.properties['Cluster_Predominante']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Empresa_Lider'] !== null ? autolinker.link(String(feature.properties['Empresa_Lider']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Accesos_Lider'] !== null ? autolinker.link(String(feature.properties['Accesos_Lider']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Tipo_Empresa_Lider'] !== null ? autolinker.link(String(feature.properties['Tipo_Empresa_Lider']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Categoria_Lider'] !== null ? autolinker.link(String(feature.properties['Categoria_Lider']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Rango_Lider'] !== null ? autolinker.link(String(feature.properties['Rango_Lider']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Cluster_Lider'] !== null ? autolinker.link(String(feature.properties['Cluster_Lider']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_TIPO_ESTATALES'] !== null ? autolinker.link(String(feature.properties['Num_TIPO_ESTATALES']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_TIPO_ISP_A'] !== null ? autolinker.link(String(feature.properties['Num_TIPO_ISP_A']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_TIPO_ISP_B'] !== null ? autolinker.link(String(feature.properties['Num_TIPO_ISP_B']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_TIPO_ISP_C'] !== null ? autolinker.link(String(feature.properties['Num_TIPO_ISP_C']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_TIPO_ISP_D'] !== null ? autolinker.link(String(feature.properties['Num_TIPO_ISP_D']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_TIPO_LIDER_A'] !== null ? autolinker.link(String(feature.properties['Num_TIPO_LIDER_A']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_TIPO_LIDER_B'] !== null ? autolinker.link(String(feature.properties['Num_TIPO_LIDER_B']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_TEC_FTTH'] !== null ? autolinker.link(String(feature.properties['Num_TEC_FTTH']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_TEC_HFC'] !== null ? autolinker.link(String(feature.properties['Num_TEC_HFC']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_TEC_OTRAS'] !== null ? autolinker.link(String(feature.properties['Num_TEC_OTRAS']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_SEG2_Corporativo'] !== null ? autolinker.link(String(feature.properties['Num_SEG2_Corporativo']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_SEG2_Otro'] !== null ? autolinker.link(String(feature.properties['Num_SEG2_Otro']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_SEG2_Residencial'] !== null ? autolinker.link(String(feature.properties['Num_SEG2_Residencial']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_AMAZONAS'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_AMAZONAS']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_ANTIOQUIA'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_ANTIOQUIA']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_ARAUCA'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_ARAUCA']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_ARCHIPIÉLAGO_DE_SAN_ANDRÉS,_PROVIDENCIA_Y_SANTA_CATALINA'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_ARCHIPIÉLAGO_DE_SAN_ANDRÉS,_PROVIDENCIA_Y_SANTA_CATALINA']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_ATLÁNTICO'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_ATLÁNTICO']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_BOGOTÁ_D.C.'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_BOGOTÁ_D.C.']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_BOLÍVAR'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_BOLÍVAR']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_BOYACÁ'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_BOYACÁ']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_CALDAS'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_CALDAS']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_CAQUETA'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_CAQUETA']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_CASANARE'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_CASANARE']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_CAUCA'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_CAUCA']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_CESAR'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_CESAR']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_CHOCÓ'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_CHOCÓ']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_CUNDINAMARCA'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_CUNDINAMARCA']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_CÓRDOBA'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_CÓRDOBA']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_GUAINÍA'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_GUAINÍA']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_GUAVIARE'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_GUAVIARE']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_HUILA'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_HUILA']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_LA_GUAJIRA'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_LA_GUAJIRA']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_MAGDALENA'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_MAGDALENA']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_META'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_META']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_NARIÑO'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_NARIÑO']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_NORTE_DE_SANTANDER'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_NORTE_DE_SANTANDER']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_PUTUMAYO'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_PUTUMAYO']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_QUINDÍO'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_QUINDÍO']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_RISARALDA'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_RISARALDA']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_SANTANDER'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_SANTANDER']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_SUCRE'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_SUCRE']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_TOLIMA'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_TOLIMA']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_VALLE_DEL_CAUCA'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_VALLE_DEL_CAUCA']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_VAUPÉS'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_VAUPÉS']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Num_DEPTO_VICHADA'] !== null ? autolinker.link(String(feature.properties['Num_DEPTO_VICHADA']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Popup_HTML'] !== null ? autolinker.link(String(feature.properties['Popup_HTML']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_AccesosporcluesterNET_1_0(feature) {
            switch(String(feature.properties['Cluster_Predominante'])) {
                case 'AMAZONAS N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(223,68,228,0.8)',
                interactive: true,
            }
                    break;
                case 'ANTIOQUIA Bajo Cauca':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(137,236,76,0.8)',
                interactive: true,
            }
                    break;
                case 'ANTIOQUIA Magdalena Medio':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(199,204,50,0.8)',
                interactive: true,
            }
                    break;
                case 'ANTIOQUIA Nordeste':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(236,114,181,0.8)',
                interactive: true,
            }
                    break;
                case 'ANTIOQUIA Norte':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(152,200,116,0.8)',
                interactive: true,
            }
                    break;
                case 'ANTIOQUIA Occidente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(232,190,54,0.8)',
                interactive: true,
            }
                    break;
                case 'ANTIOQUIA Oriente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(109,117,218,0.8)',
                interactive: true,
            }
                    break;
                case 'ANTIOQUIA Suroeste':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(23,132,204,0.8)',
                interactive: true,
            }
                    break;
                case 'ANTIOQUIA Urabá':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(39,180,212,0.8)',
                interactive: true,
            }
                    break;
                case 'ANTIOQUIA Valle de Aburrá':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(119,174,226,0.8)',
                interactive: true,
            }
                    break;
                case 'ARAUCA N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(121,201,177,0.8)',
                interactive: true,
            }
                    break;
                case 'ARCHIPIÉLAGO DE SAN ANDRÉS, PROVIDENCIA Y SANTA CATALINA N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(226,121,60,0.8)',
                interactive: true,
            }
                    break;
                case 'ATLÁNTICO Centro':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(234,55,106,0.8)',
                interactive: true,
            }
                    break;
                case 'ATLÁNTICO Costera':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(199,61,217,0.8)',
                interactive: true,
            }
                    break;
                case 'ATLÁNTICO Metropolitana':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(109,124,202,0.8)',
                interactive: true,
            }
                    break;
                case 'ATLÁNTICO Oriente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(16,232,103,0.8)',
                interactive: true,
            }
                    break;
                case 'ATLÁNTICO Sur':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(206,93,85,0.8)',
                interactive: true,
            }
                    break;
                case 'BOGOTÁ D.C. Bogotá D.C.':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(107,137,207,0.8)',
                interactive: true,
            }
                    break;
                case 'BOLÍVAR Dique':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(207,91,108,0.8)',
                interactive: true,
            }
                    break;
                case 'BOLÍVAR Isla de Mompox':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(89,189,225,0.8)',
                interactive: true,
            }
                    break;
                case 'BOLÍVAR La Mojana':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(233,123,207,0.8)',
                interactive: true,
            }
                    break;
                case 'BOLÍVAR Loba':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(131,238,197,0.8)',
                interactive: true,
            }
                    break;
                case 'BOLÍVAR Magdalena Medio':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(64,225,107,0.8)',
                interactive: true,
            }
                    break;
                case 'BOLÍVAR Montes de María':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(228,225,35,0.8)',
                interactive: true,
            }
                    break;
                case 'BOLÍVAR N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(52,230,67,0.8)',
                interactive: true,
            }
                    break;
                case 'BOYACÁ Centro':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(240,39,220,0.8)',
                interactive: true,
            }
                    break;
                case 'BOYACÁ Gutiérrez':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(113,220,127,0.8)',
                interactive: true,
            }
                    break;
                case 'BOYACÁ La Libertad':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(196,236,131,0.8)',
                interactive: true,
            }
                    break;
                case 'BOYACÁ Lengupá':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(215,95,213,0.8)',
                interactive: true,
            }
                    break;
                case 'BOYACÁ Márquez':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(76,203,104,0.8)',
                interactive: true,
            }
                    break;
                case 'BOYACÁ N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(103,215,228,0.8)',
                interactive: true,
            }
                    break;
                case 'BOYACÁ Neira':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(107,181,203,0.8)',
                interactive: true,
            }
                    break;
                case 'BOYACÁ Norte':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(173,109,236,0.8)',
                interactive: true,
            }
                    break;
                case 'BOYACÁ Occidente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(191,232,86,0.8)',
                interactive: true,
            }
                    break;
                case 'BOYACÁ Oriente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(235,194,137,0.8)',
                interactive: true,
            }
                    break;
                case 'BOYACÁ Ricaurte':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(205,125,165,0.8)',
                interactive: true,
            }
                    break;
                case 'BOYACÁ Sugamuxi':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(143,19,232,0.8)',
                interactive: true,
            }
                    break;
                case 'BOYACÁ Tundama':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(99,51,202,0.8)',
                interactive: true,
            }
                    break;
                case 'BOYACÁ Valderrama':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(176,42,210,0.8)',
                interactive: true,
            }
                    break;
                case 'CALDAS Alto Occidente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(233,88,97,0.8)',
                interactive: true,
            }
                    break;
                case 'CALDAS Alto Oriente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(217,228,68,0.8)',
                interactive: true,
            }
                    break;
                case 'CALDAS Bajo Occidente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(166,233,138,0.8)',
                interactive: true,
            }
                    break;
                case 'CALDAS Centro Sur':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(98,140,225,0.8)',
                interactive: true,
            }
                    break;
                case 'CALDAS Magdalena Caldense':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(238,32,107,0.8)',
                interactive: true,
            }
                    break;
                case 'CALDAS Norte':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(39,45,219,0.8)',
                interactive: true,
            }
                    break;
                case 'CAQUETA N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(209,240,36,0.8)',
                interactive: true,
            }
                    break;
                case 'CASANARE N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(90,232,232,0.8)',
                interactive: true,
            }
                    break;
                case 'CAUCA Bota Caucana':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(227,34,56,0.8)',
                interactive: true,
            }
                    break;
                case 'CAUCA Centro':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(83,210,58,0.8)',
                interactive: true,
            }
                    break;
                case 'CAUCA Macizo':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(79,228,56,0.8)',
                interactive: true,
            }
                    break;
                case 'CAUCA N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(116,155,218,0.8)',
                interactive: true,
            }
                    break;
                case 'CAUCA Norte':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(230,121,185,0.8)',
                interactive: true,
            }
                    break;
                case 'CAUCA Occidente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(224,162,107,0.8)',
                interactive: true,
            }
                    break;
                case 'CAUCA Oriente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(46,37,218,0.8)',
                interactive: true,
            }
                    break;
                case 'CAUCA Sur':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(232,104,223,0.8)',
                interactive: true,
            }
                    break;
                case 'CESAR N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(90,227,204,0.8)',
                interactive: true,
            }
                    break;
                case 'CHOCÓ N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(232,171,111,0.8)',
                interactive: true,
            }
                    break;
                case 'CÓRDOBA Alto Sinú':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(218,94,91,0.8)',
                interactive: true,
            }
                    break;
                case 'CÓRDOBA Bajo Sinú':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(190,44,239,0.8)',
                interactive: true,
            }
                    break;
                case 'CÓRDOBA Costanera':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(207,219,119,0.8)',
                interactive: true,
            }
                    break;
                case 'CÓRDOBA Medio Sinú':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(184,72,228,0.8)',
                interactive: true,
            }
                    break;
                case 'CÓRDOBA Sabanas':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(128,239,97,0.8)',
                interactive: true,
            }
                    break;
                case 'CÓRDOBA San Jorge':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(172,214,87,0.8)',
                interactive: true,
            }
                    break;
                case 'CUNDINAMARCA Almeidas':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(136,205,72,0.8)',
                interactive: true,
            }
                    break;
                case 'CUNDINAMARCA Alto Magdalena':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(66,225,172,0.8)',
                interactive: true,
            }
                    break;
                case 'CUNDINAMARCA Bajo Magdalena':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(234,134,62,0.8)',
                interactive: true,
            }
                    break;
                case 'CUNDINAMARCA Gualivá':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(88,122,226,0.8)',
                interactive: true,
            }
                    break;
                case 'CUNDINAMARCA Guavio':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(103,170,206,0.8)',
                interactive: true,
            }
                    break;
                case 'CUNDINAMARCA Magdalena Centro':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(212,193,23,0.8)',
                interactive: true,
            }
                    break;
                case 'CUNDINAMARCA Medina':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(128,209,120,0.8)',
                interactive: true,
            }
                    break;
                case 'CUNDINAMARCA N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(91,213,183,0.8)',
                interactive: true,
            }
                    break;
                case 'CUNDINAMARCA Oriente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(95,212,116,0.8)',
                interactive: true,
            }
                    break;
                case 'CUNDINAMARCA Rionegro':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(224,203,81,0.8)',
                interactive: true,
            }
                    break;
                case 'CUNDINAMARCA Sabana Centro':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(47,209,139,0.8)',
                interactive: true,
            }
                    break;
                case 'CUNDINAMARCA Sabana Occidente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(135,234,170,0.8)',
                interactive: true,
            }
                    break;
                case 'CUNDINAMARCA Soacha':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(189,109,239,0.8)',
                interactive: true,
            }
                    break;
                case 'CUNDINAMARCA Sumapaz':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(213,190,98,0.8)',
                interactive: true,
            }
                    break;
                case 'CUNDINAMARCA Tequendama':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(223,66,68,0.8)',
                interactive: true,
            }
                    break;
                case 'CUNDINAMARCA Ubaté':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(41,74,208,0.8)',
                interactive: true,
            }
                    break;
                case 'GUAINÍA N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(131,60,218,0.8)',
                interactive: true,
            }
                    break;
                case 'GUAVIARE N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(216,26,230,0.8)',
                interactive: true,
            }
                    break;
                case 'HUILA Centro':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(60,216,128,0.8)',
                interactive: true,
            }
                    break;
                case 'HUILA N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(117,208,222,0.8)',
                interactive: true,
            }
                    break;
                case 'HUILA Norte':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(34,237,142,0.8)',
                interactive: true,
            }
                    break;
                case 'HUILA Occidente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(218,170,87,0.8)',
                interactive: true,
            }
                    break;
                case 'HUILA Sur':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(209,27,88,0.8)',
                interactive: true,
            }
                    break;
                case 'LA GUAJIRA N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(206,122,19,0.8)',
                interactive: true,
            }
                    break;
                case 'MAGDALENA N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(236,54,209,0.8)',
                interactive: true,
            }
                    break;
                case 'META N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(159,239,53,0.8)',
                interactive: true,
            }
                    break;
                case 'NARIÑO Centro':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(225,122,142,0.8)',
                interactive: true,
            }
                    break;
                case 'NARIÑO Guambuyaco':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(203,126,87,0.8)',
                interactive: true,
            }
                    break;
                case 'NARIÑO Juanambu':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(154,116,212,0.8)',
                interactive: true,
            }
                    break;
                case 'NARIÑO La Cordillera':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(122,209,199,0.8)',
                interactive: true,
            }
                    break;
                case 'NARIÑO La Sabana':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(212,177,87,0.8)',
                interactive: true,
            }
                    break;
                case 'NARIÑO Los Abades':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(209,21,140,0.8)',
                interactive: true,
            }
                    break;
                case 'NARIÑO N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(104,240,104,0.8)',
                interactive: true,
            }
                    break;
                case 'NARIÑO Obando':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(200,35,112,0.8)',
                interactive: true,
            }
                    break;
                case 'NARIÑO Occidente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(76,132,210,0.8)',
                interactive: true,
            }
                    break;
                case 'NARIÑO Pacifico Sur':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(237,132,207,0.8)',
                interactive: true,
            }
                    break;
                case 'NARIÑO Piedemonte Costero':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(231,66,15,0.8)',
                interactive: true,
            }
                    break;
                case 'NARIÑO Rio Mayo':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(79,95,214,0.8)',
                interactive: true,
            }
                    break;
                case 'NARIÑO Sanquianga':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(209,234,111,0.8)',
                interactive: true,
            }
                    break;
                case 'NARIÑO Telembi':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(212,111,71,0.8)',
                interactive: true,
            }
                    break;
                case 'NORTE DE SANTANDER Centro':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(134,209,107,0.8)',
                interactive: true,
            }
                    break;
                case 'NORTE DE SANTANDER Norte (Catatumbo)':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(213,29,176,0.8)',
                interactive: true,
            }
                    break;
                case 'NORTE DE SANTANDER Occidente (Ocaña)':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(200,108,216,0.8)',
                interactive: true,
            }
                    break;
                case 'NORTE DE SANTANDER Oriente (Metropolitana)':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(90,44,240,0.8)',
                interactive: true,
            }
                    break;
                case 'NORTE DE SANTANDER Suroccidente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(138,206,65,0.8)',
                interactive: true,
            }
                    break;
                case 'NORTE DE SANTANDER Suroriente (Pamplona)':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(115,229,204,0.8)',
                interactive: true,
            }
                    break;
                case 'PUTUMAYO N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(221,208,29,0.8)',
                interactive: true,
            }
                    break;
                case 'QUINDÍO N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(57,163,212,0.8)',
                interactive: true,
            }
                    break;
                case 'RISARALDA Vertiente Occidental':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(171,218,29,0.8)',
                interactive: true,
            }
                    break;
                case 'RISARALDA Vertiente Oriental':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(239,168,14,0.8)',
                interactive: true,
            }
                    break;
                case 'RISARALDA Vertiente Pacífico':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(18,226,84,0.8)',
                interactive: true,
            }
                    break;
                case 'SANTANDER Comunera':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(86,214,203,0.8)',
                interactive: true,
            }
                    break;
                case 'SANTANDER García Rovira':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(55,211,62,0.8)',
                interactive: true,
            }
                    break;
                case 'SANTANDER Guanenta':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(225,25,71,0.8)',
                interactive: true,
            }
                    break;
                case 'SANTANDER Metropolitana':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(230,94,60,0.8)',
                interactive: true,
            }
                    break;
                case 'SANTANDER N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(114,225,110,0.8)',
                interactive: true,
            }
                    break;
                case 'SANTANDER Vélez':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(91,165,226,0.8)',
                interactive: true,
            }
                    break;
                case 'SANTANDER Yariguies':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(229,77,57,0.8)',
                interactive: true,
            }
                    break;
                case 'SUCRE N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(43,125,219,0.8)',
                interactive: true,
            }
                    break;
                case 'TOLIMA Ibague':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(235,53,178,0.8)',
                interactive: true,
            }
                    break;
                case 'TOLIMA N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(87,38,220,0.8)',
                interactive: true,
            }
                    break;
                case 'TOLIMA Nevados':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(235,68,39,0.8)',
                interactive: true,
            }
                    break;
                case 'TOLIMA Norte':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(142,57,216,0.8)',
                interactive: true,
            }
                    break;
                case 'TOLIMA Oriente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(33,13,211,0.8)',
                interactive: true,
            }
                    break;
                case 'TOLIMA Sur':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(186,84,237,0.8)',
                interactive: true,
            }
                    break;
                case 'TOLIMA Suroriente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(122,202,206,0.8)',
                interactive: true,
            }
                    break;
                case 'VALLE DEL CAUCA Centro':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(166,130,228,0.8)',
                interactive: true,
            }
                    break;
                case 'VALLE DEL CAUCA Norte':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(116,200,71,0.8)',
                interactive: true,
            }
                    break;
                case 'VALLE DEL CAUCA Oriente':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(112,91,236,0.8)',
                interactive: true,
            }
                    break;
                case 'VALLE DEL CAUCA Pacífico':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(78,222,148,0.8)',
                interactive: true,
            }
                    break;
                case 'VALLE DEL CAUCA Sur':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(210,47,115,0.8)',
                interactive: true,
            }
                    break;
                case 'VAUPÉS N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(21,18,213,0.8)',
                interactive: true,
            }
                    break;
                case 'VICHADA N.A':
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(70,218,213,0.8)',
                interactive: true,
            }
                    break;
                default:
                    return {
                pane: 'pane_AccesosporcluesterNET_1',
                opacity: 1,
                color: 'rgba(35,35,35,0.8)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(138,119,224,0.8)',
                interactive: true,
            }
                    break;
            }
        }
        map.createPane('pane_AccesosporcluesterNET_1');
        map.getPane('pane_AccesosporcluesterNET_1').style.zIndex = 401;
        map.getPane('pane_AccesosporcluesterNET_1').style['mix-blend-mode'] = 'normal';
        var layer_AccesosporcluesterNET_1 = new L.geoJson(json_AccesosporcluesterNET_1, {
            attribution: '',
            interactive: true,
            dataVar: 'json_AccesosporcluesterNET_1',
            layerName: 'layer_AccesosporcluesterNET_1',
            pane: 'pane_AccesosporcluesterNET_1',
            onEachFeature: pop_AccesosporcluesterNET_1,
            style: style_AccesosporcluesterNET_1_0,
        });
        bounds_group.addLayer(layer_AccesosporcluesterNET_1);
        map.addLayer(layer_AccesosporcluesterNET_1);
        setBounds();
        </script>        
    
<style>
/* ── TÍTULO ─────────────────────────────────────────────────────── */
.map-title-card {
  position:absolute; top:10px; left:55px; z-index:1001;
  background:white; padding:7px 14px; border-radius:8px;
  box-shadow:0 2px 6px rgba(0,0,0,.3); border:1px solid #1976D2;
  pointer-events:none;
}
.map-title-card h2 {
  margin:0; font-size:13px; color:#1976D2;
  font-family:sans-serif; text-transform:uppercase;
}

/* ── BUSCADOR ────────────────────────────────────────────────────── */
#buscador-wrap {
  position:absolute; top:10px; right:70px; z-index:1001;
  background:white; padding:6px 10px; border-radius:8px;
  box-shadow:0 2px 6px rgba(0,0,0,.3); border:1px solid #ddd;
  display:flex; align-items:center; gap:6px;
}
#input-buscar {
  border:1px solid #ddd; border-radius:4px; padding:5px 9px;
  font-size:13px; width:230px; outline:none;
}
#input-buscar:focus { border-color:#1976D2; }
#btn-clear-b {
  background:#f5f5f5; border:1px solid #ddd; border-radius:4px;
  padding:4px 10px; cursor:pointer; font-size:12px;
}
#resultados-b {
  position:absolute; top:48px; right:70px; z-index:1000;
  background:white; border-radius:8px;
  box-shadow:0 2px 10px rgba(0,0,0,.2);
  max-width:360px; min-width:280px; max-height:400px;
  overflow-y:auto; display:none; border:1px solid #ddd;
}
.res-item { padding:9px 12px; border-bottom:1px solid #f0f0f0; cursor:pointer; }
.res-item:hover { background:#f5f5f5; }
.res-nombre { font-weight:bold; color:#1976D2; font-size:13px; }
.res-sub    { font-size:11px; color:#666; margin-top:2px; }

/* ── BOTÓN TOGGLE FILTROS ────────────────────────────────────────── */
#toggle-filtros {
  position:absolute; bottom:20px; right:20px; z-index:1002;
  background:#1976D2; color:white; border:none; border-radius:50%;
  width:48px; height:48px; cursor:pointer; font-size:20px;
  box-shadow:0 2px 10px rgba(0,0,0,.4);
}

/* ── PANEL FILTROS ───────────────────────────────────────────────── */
#filtros-panel {
  position:absolute; bottom:78px; right:20px; background:white;
  padding:14px; border-radius:12px;
  box-shadow:0 2px 20px rgba(0,0,0,.2); z-index:1000; width:270px;
  max-height:calc(100vh - 130px); overflow-y:auto;
  font-family:sans-serif; border:1px solid #ccc;
  transition:transform .3s, opacity .3s;
}
#filtros-panel.oculto { transform:translateY(20px); opacity:0; pointer-events:none; }

.f-titulo {
  font-size:11px; font-weight:bold; color:#888;
  text-transform:uppercase; margin:10px 0 5px;
}
.f-titulo:first-child { margin-top:0; }
.f-seccion { border-bottom:1px solid #eee; padding-bottom:8px; }

.f-seccion-scroll {
  border-bottom:1px solid #eee; padding-bottom:8px;
}
.f-scroll-inner {
  max-height:160px; overflow-y:auto; padding-right:4px;
}

.f-item {
  display:flex; align-items:center; font-size:12px;
  margin-bottom:4px; cursor:pointer; padding:2px 4px; border-radius:3px;
}
.f-item:hover { background:#f5f5f5; }
.f-item input { margin-right:7px; cursor:pointer; }

#btn-aplicar {
  width:100%; margin-top:10px; cursor:pointer;
  background:#1976D2; color:white; border:none;
  padding:9px; border-radius:6px; font-weight:bold;
}
#btn-aplicar:hover { background:#1565C0; }
#div-contador {
  font-size:11px; margin-top:8px; text-align:center;
  border-top:1px solid #eee; padding-top:7px; color:#666;
}

/* ── PANEL RESUMEN MINIMIZABLE ──────────────────────────────────── */
#resumen-panel {
  position:absolute; bottom:20px; left:20px; z-index:1001;
  background:white; border-radius:10px;
  box-shadow:0 2px 12px rgba(0,0,0,.25); border:1px solid #e0e0e0;
  font-family:sans-serif; font-size:12px;
  transition: transform .3s ease;
}
#resumen-header {
  background:linear-gradient(135deg,#1565C0,#1976D2);
  color:white; padding:8px 12px; font-weight:bold; font-size:12px;
  display:flex; justify-content:space-between; align-items:center;
  cursor:pointer; user-select:none;
}
#resumen-toggle {
  background:rgba(255,255,255,.2); border:none; color:white;
  border-radius:4px; padding:2px 8px; cursor:pointer; font-size:14px;
  transition:background .2s;
}
#resumen-toggle:hover { background:rgba(255,255,255,.3); }

#resumen-body {
  padding:10px 12px; max-height:300px; overflow:hidden;
  transition:max-height .3s ease, padding .3s ease;
}
#resumen-panel.minimizado #resumen-body {
  max-height:0; padding:0 12px;
}

.r-fila {
  display:flex; justify-content:space-between; align-items:center;
  padding:4px 0; border-bottom:1px solid #f5f5f5;
}
.r-fila:last-child { border-bottom:none; }
.r-label { color:#555; }
.r-valor { font-weight:bold; color:#1976D2; }

#resumen-nota {
  font-size:10px; color:#999; text-align:center;
  padding:5px 12px 8px; border-top:1px solid #f0f0f0;
  font-style:italic;
  transition:opacity .3s ease;
}
#resumen-panel.minimizado #resumen-nota { display:none; }

/* ── POPUPS ──────────────────────────────────────────────────────── */
.leaflet-popup-content-wrapper {
  padding:0; overflow:hidden; border-radius:10px;
  min-width:340px!important; max-width:360px!important;
}
.leaflet-popup-content {
  margin:0!important;
  min-width:340px!important; max-width:360px!important;
  max-height:600px; overflow-y:auto;
}

/* Items de empresa en popup - ocultables dinámicamente */
.empresa-item { transition: opacity .2s; }
.empresa-item.filtrado-oculto { display:none !important; }

/* ── RESPONSIVE ──────────────────────────────────────────────────── */
@media(max-width:600px){
  .map-title-card { left:10px; width:calc(100% - 130px); padding:4px 8px; }
  .map-title-card h2 { font-size:10px; }
  #buscador-wrap { right:10px; left:10px; top:50px; width:auto; }
  #input-buscar  { width:100%; }
  #resultados-b  { right:10px; left:10px; max-width:none; }
  #filtros-panel { width:calc(100% - 50px); right:25px; bottom:80px; }
  #resumen-panel { left:10px; bottom:80px; }
  .leaflet-popup-content-wrapper,
  .leaflet-popup-content { min-width:300px!important; max-width:320px!important; }
}
</style>

<!-- TÍTULO -->
<div class="map-title-card">
  <h2>📊 Análisis de Internet · Colombia Versión 2</h2>
</div>

<!-- BUSCADOR -->
<div id="buscador-wrap">
  <input id="input-buscar" type="text"
         placeholder="Buscar municipio, departamento o empresa…"/>
  <button id="btn-clear-b" title="Limpiar">✖</button>
</div>
<div id="resultados-b"></div>

<!-- BOTÓN FILTROS -->
<button id="toggle-filtros" title="Filtros">🔍</button>

<!-- PANEL FILTROS -->
<div id="filtros-panel" class="oculto">
  <div style="font-size:14px;font-weight:bold;color:#1976D2;
              text-align:center;margin-bottom:10px;">
    🔍 Filtrar Municipios
  </div>
  <div id="filtros-contenido">
    <div style="font-size:12px;color:#999;text-align:center;padding:10px;">
      Cargando…
    </div>
  </div>
  <button id="btn-aplicar">ACTUALIZAR VISTA</button>
  <div id="div-contador">
    Visibles:
    <span id="num-visible" style="font-weight:bold;color:#1976D2;">0</span>
  </div>
</div>

<!-- PANEL RESUMEN MINIMIZABLE -->
<div id="resumen-panel">
  <div id="resumen-header">
    <span>📊 Resumen</span>
    <button id="resumen-toggle" title="Minimizar/Expandir">▼</button>
  </div>
  <div id="resumen-body">
    <div class="r-fila">
      <span class="r-label">🏙️ Municipios</span>
      <span class="r-valor" id="r-municipios">–</span>
    </div>
    <div class="r-fila">
      <span class="r-label">🏢 Empresas líd.</span>
      <span class="r-valor" id="r-empresas">–</span>
    </div>
    <div class="r-fila">
      <span class="r-label">📶 Total accesos</span>
      <span class="r-valor" id="r-accesos">–</span>
    </div>
    <div class="r-fila">
      <span class="r-label">🔷 Accesos FTTH</span>
      <span class="r-valor" id="r-ftth">–</span>
    </div>
    <div class="r-fila">
      <span class="r-label">🔷 % Fibra prom.</span>
      <span class="r-valor" id="r-fibra">–</span>
    </div>
    <div class="r-fila">
      <span class="r-label">⬇️ Vel. bajada prom.</span>
      <span class="r-valor" id="r-veldown">–</span>
    </div>
    <div class="r-fila">
      <span class="r-label">⏱️ Latencia prom.</span>
      <span class="r-valor" id="r-latencia">–</span>
    </div>
  </div>
  <div id="resumen-nota">Se actualiza con los filtros</div>
</div>

<script id="mejora-script">
(function(){

/* ═══════════════════════════════════════════════════════════════════
   CONFIGURACIÓN DE FILTROS
   
   Filtros activos en v2.4:
     - Tipo de Empresa (TIPO EMPRESA)
     - Tecnología (TIPO TECNOLOGIA 2) → 3 valores: FTTH, HFC, OTRAS
     - Segmento (SEGMENTO2) → 3 valores: Residencial, Corporativo, Otro
     - Plaza (del shapefile)
     - Departamento (33 valores, con scroll)
   
   Se eliminaron: Rango de Tamaño y Categoría
   ═══════════════════════════════════════════════════════════════════ */

var SECCIONES = [
  { prefijo:'Num_TIPO_',  clase:'chk-tipo',  label:'🏢 Por Tipo de Empresa',  scroll:false },
  { prefijo:'Num_TEC_',   clase:'chk-tec',   label:'🔧 Por Tecnología',       scroll:false },
  { prefijo:'Num_SEG2_',  clase:'chk-seg2',  label:'📂 Por Segmento',         scroll:false },
  { prefijo:'Num_PLAZA_', clase:'chk-plaza', label:'🏙️ Por Plaza',            scroll:false },
  { prefijo:'Num_DEPTO_', clase:'chk-depto', label:'🗺️ Por Departamento',    scroll:true  },
];

function fmtNum(n){ return Math.round(n).toLocaleString('es-CO'); }

// Variable global para guardar el estado de los filtros activos
var filtrosActivos = {};

function init(){
  var capa = window['layer_AccesosporcluesterNET_1'];
  if(!capa){ setTimeout(init, 500); return; }

  /* ── 1. ÍNDICE ────────────────────────────────────────────────── */
  var indice = [];
  capa.eachLayer(function(l){
    if(!l.feature) return;
    var p = l.feature.properties;
    var empresas = [];
    var re = /font-weight:bold[^>]*>\s*[🔴🟠🟡🟢🔵⚪🟣⚫]\s*([^<]+)</g, m;
    var popH = p['Popup_HTML'] || '';
    while((m = re.exec(popH)) !== null){
      var n = m[1].trim(); if(n) empresas.push(n);
    }
    indice.push({
      mun:   (p['MUNICIPIO']    || '').toUpperCase(),
      dep:   (p['DEPARTAMENTO'] || '').toUpperCase(),
      plaza: (p['Plaza'] || p['PLAZA'] || '').toUpperCase(),
      emps:  empresas,
      layer: l,
      props: p,
    });
  });

  /* ── 2. POPUPS + HOVER ───────────────────────────────────────── */
  capa.eachLayer(function(l){
    if(!l.feature) return;
    var p = l.feature.properties;
    var plaza = p['Plaza'] || p['PLAZA'] || 'N/A';
    var html  = (p['Popup_HTML'] || '<p>Sin datos</p>')
                  .replace('N/A (dato del shapefile)', plaza)
                  .replace('{Plaza}', plaza);
    l.bindPopup(html, { maxWidth:360, minWidth:340 });
    
    // Actualizar popup cuando se abre
    l.on('popupopen', function(){
      actualizarPopupDinamico(l);
    });
    
    l.on('mouseover', function(){
      if(this.options.interactive)
        this.setStyle({ color:'#FFD700', weight:3, fillOpacity:.85 });
    });
    l.on('mouseout', function(){ capa.resetStyle(this); });
  });

  /* ── 3. CONSTRUIR PANEL FILTROS ─────────────────────────────── */
  var sufijos = {};
  SECCIONES.forEach(function(s){ sufijos[s.prefijo] = new Set(); });

  indice.forEach(function(item){
    SECCIONES.forEach(function(s){
      Object.keys(item.props).forEach(function(k){
        if(k.startsWith(s.prefijo) && item.props[k] > 0)
          sufijos[s.prefijo].add(k.slice(s.prefijo.length));
      });
    });
  });

  var panelHTML = '';
  SECCIONES.forEach(function(s){
    var vals = Array.from(sufijos[s.prefijo]).sort();
    if(!vals.length) return;
    var wrapperTag   = s.scroll ? 'f-seccion-scroll' : 'f-seccion';
    var innerOpenTag = s.scroll ? '<div class="f-scroll-inner">' : '';
    var innerCloseTag = s.scroll ? '</div>' : '';

    panelHTML += '<div class="' + wrapperTag + '">';
    panelHTML += '<div class="f-titulo">' + s.label + '</div>';
    panelHTML += innerOpenTag;
    panelHTML +=
      '<label class="f-item">' +
      '<input type="checkbox" class="' + s.clase + '" value="__todos__" checked>' +
      '<b>Todos</b></label>';
    vals.forEach(function(v){
      var lbl = v.replace(/_/g, ' ');
      panelHTML +=
        '<label class="f-item">' +
        '<input type="checkbox" class="' + s.clase + '" value="' + v + '"> ' +
        lbl + '</label>';
    });
    panelHTML += innerCloseTag + '</div>';
  });
  document.getElementById('filtros-contenido').innerHTML = panelHTML;

  /* ── 4. TOGGLE FILTROS ──────────────────────────────────────── */
  var btnT  = document.getElementById('toggle-filtros');
  var panel = document.getElementById('filtros-panel');

  btnT.onclick = function(e){
    e.stopPropagation();
    panel.classList.toggle('oculto');
    btnT.innerText = panel.classList.contains('oculto') ? '🔍' : '✖';
  };

  /* ── 5. TOGGLE RESUMEN ──────────────────────────────────────── */
  var resumenPanel  = document.getElementById('resumen-panel');
  var resumenToggle = document.getElementById('resumen-toggle');
  var resumenHeader = document.getElementById('resumen-header');

  if(window.innerWidth < 600){
    resumenPanel.classList.add('minimizado');
    resumenToggle.innerText = '▲';
  }

  resumenHeader.onclick = function(e){
    e.stopPropagation();
    resumenPanel.classList.toggle('minimizado');
    resumenToggle.innerText = resumenPanel.classList.contains('minimizado') ? '▲' : '▼';
  };

  /* ── 6. CERRAR PANEL AL CLICKEAR FUERA ─────────────────────── */
  document.addEventListener('click', function(e){
    if(!panel.classList.contains('oculto')){
      if(!panel.contains(e.target) && e.target !== btnT){
        panel.classList.add('oculto');
        btnT.innerText = '🔍';
      }
    }
  });

  /* ── 7. LÓGICA CHECKBOXES ───────────────────────────────────── */
  function bindGroup(clase){
    var cbTodos = document.querySelector('.' + clase + '[value="__todos__"]');
    var cbInds  = document.querySelectorAll('.' + clase + ':not([value="__todos__"])');
    if(cbTodos) cbTodos.onchange = function(){
      if(this.checked) cbInds.forEach(function(c){ c.checked = false; });
    };
    cbInds.forEach(function(cb){
      cb.onchange = function(){
        if(this.checked && cbTodos) cbTodos.checked = false;
        var hay = Array.from(cbInds).some(function(c){ return c.checked; });
        if(!hay && cbTodos) cbTodos.checked = true;
      };
    });
  }
  SECCIONES.forEach(function(s){ bindGroup(s.clase); });

  /* ── 8. FUNCIÓN SELECCIONADOS ───────────────────────────────── */
  function seleccionados(clase){
    var cbTodos = document.querySelector('.' + clase + '[value="__todos__"]');
    if(cbTodos && cbTodos.checked) return null;
    var r = [];
    document.querySelectorAll('.' + clase + ':checked')
      .forEach(function(c){ r.push(c.value); });
    return r.length ? r : null;
  }

  /* ── 9. ACTUALIZAR POPUP DINÁMICO ───────────────────────────── */
  function actualizarPopupDinamico(layer){
    var popup = layer.getPopup();
    if(!popup) return;
    
    var container = popup.getElement();
    if(!container) return;
    
    // Obtener todas las empresas del municipio
    var empresasItems = container.querySelectorAll('.empresa-item');
    
    // Filtrar empresas según filtros activos
    var empresasVisibles = [];
    empresasItems.forEach(function(item){
      var tipo  = item.getAttribute('data-tipo');
      var tec   = item.getAttribute('data-tec');
      var seg2  = item.getAttribute('data-seg2');
      var accesos = parseInt(item.getAttribute('data-accesos')) || 0;
      
      var visible = true;
      
      // Aplicar filtros
      if(filtrosActivos.tipo && filtrosActivos.tipo.length){
        if(!filtrosActivos.tipo.some(function(v){ return tipo.includes(v.replace(/_/g,' ')); }))
          visible = false;
      }
      if(filtrosActivos.tec && filtrosActivos.tec.length){
        if(!filtrosActivos.tec.includes(tec))
          visible = false;
      }
      if(filtrosActivos.seg2 && filtrosActivos.seg2.length){
        if(!filtrosActivos.seg2.includes(seg2))
          visible = false;
      }
      
      if(visible){
        item.classList.remove('filtrado-oculto');
        empresasVisibles.push({
          nombre: item.getAttribute('data-empresa'),
          accesos: accesos,
          item: item
        });
      } else {
        item.classList.add('filtrado-oculto');
      }
    });
    
    // Actualizar contador de empresas
    var contadorEls = container.querySelectorAll('.popup-count-empresas');
    contadorEls.forEach(function(el){ el.innerText = empresasVisibles.length; });
    
    var numEmpsEls = container.querySelectorAll('.popup-num-empresas');
    numEmpsEls.forEach(function(el){ el.innerText = empresasVisibles.length; });
    
    // Recalcular empresa líder (la que más accesos tiene entre las visibles)
    if(empresasVisibles.length > 0){
      empresasVisibles.sort(function(a,b){ return b.accesos - a.accesos; });
      var lider = empresasVisibles[0];
      
      var liderNombreEls = container.querySelectorAll('.popup-empresa-lider');
      liderNombreEls.forEach(function(el){ el.innerText = lider.nombre; });
      
      var liderAccesosEls = container.querySelectorAll('.popup-accesos-lider');
      liderAccesosEls.forEach(function(el){ el.innerText = fmtNum(lider.accesos); });
    }
    
    // Recalcular totales del municipio (solo de empresas visibles)
    var totalAccesos = 0;
    empresasVisibles.forEach(function(e){ totalAccesos += e.accesos; });
    
    var accTotalesEls = container.querySelectorAll('.popup-accesos-totales');
    accTotalesEls.forEach(function(el){ el.innerText = fmtNum(totalAccesos); });
  }

  /* ── 10. APLICAR FILTROS + ACTUALIZAR RESUMEN ──────────────── */
  function aplicar(){
    var filtros = SECCIONES.map(function(s){
      return { prefijo: s.prefijo, valores: seleccionados(s.clase), clase: s.clase };
    });
    
    // Guardar filtros activos globalmente para los popups
    filtrosActivos = {
      tipo:  seleccionados('chk-tipo'),
      tec:   seleccionados('chk-tec'),
      seg2:  seleccionados('chk-seg2'),
      plaza: seleccionados('chk-plaza'),
      depto: seleccionados('chk-depto'),
    };

    var cntMun=0, setEmps=new Set(), sumAcc=0, sumFtth=0, sumFibra=0;
    var sumVelDown=0, sumLat=0, cntLat=0;

    capa.eachLayer(function(l){
      if(!l.feature) return;
      var p = l.feature.properties;
      var mostrar = true;

      filtros.forEach(function(f){
        if(!mostrar || !f.valores) return;
        var cumple = f.valores.some(function(v){
          return (p[f.prefijo + v] || 0) > 0;
        });
        if(!cumple) mostrar = false;
      });

      if(mostrar){
        l.setStyle({ fillOpacity:.7, opacity:1, stroke:true });
        l.options.interactive = true;
        if(l.getElement()){
          l.getElement().style.display = '';
          l.getElement().style.pointerEvents = '';
        }
        cntMun++;
        sumAcc     += (p['Accesos_Totales']   || 0);
        sumFtth    += (p['Accesos_Fibra']     || 0);
        sumFibra   += (p['Porc_Fibra']        || 0);
        sumVelDown += (p['Vel_Down_Promedio'] || 0);
        var lat = parseFloat(p['Latencia_Promedio']);
        if(!isNaN(lat)){ sumLat += lat; cntLat++; }
        var emp = p['Empresa_Lider'];
        if(emp) setEmps.add(emp);
      } else {
        l.setStyle({ fillOpacity:0, opacity:0, stroke:false });
        l.options.interactive = false;
        if(l.getElement()){
          l.getElement().style.display = 'none';
          l.getElement().style.pointerEvents = 'none';
        }
      }
    });

    document.getElementById('num-visible').innerText = cntMun;
    document.getElementById('r-municipios').innerText = cntMun;
    document.getElementById('r-empresas').innerText   = setEmps.size;
    document.getElementById('r-accesos').innerText    = fmtNum(sumAcc);
    document.getElementById('r-ftth').innerText       = fmtNum(sumFtth);
    document.getElementById('r-fibra').innerText      =
      cntMun ? (sumFibra / cntMun).toFixed(1) + '%' : '–';
    document.getElementById('r-veldown').innerText    =
      cntMun ? (sumVelDown / cntMun).toFixed(1) + ' Mbps' : '–';
    document.getElementById('r-latencia').innerText   =
      cntLat ? (sumLat / cntLat).toFixed(1) + ' ms' : 'N/D';

    if(window.innerWidth < 600) panel.classList.add('oculto');
    
    // Actualizar popup abierto si existe
    capa.eachLayer(function(l){
      if(l.getPopup() && l.getPopup().isOpen()){
        actualizarPopupDinamico(l);
      }
    });
  }

  document.getElementById('btn-aplicar').onclick = aplicar;
  aplicar();

  /* ── 11. BUSCADOR ───────────────────────────────────────────── */
  var inputB = document.getElementById('input-buscar');
  var divRes = document.getElementById('resultados-b');
  var btnClr = document.getElementById('btn-clear-b');

  inputB.addEventListener('input', function(){
    var q = this.value.trim().toUpperCase();
    if(q.length < 2){ divRes.style.display = 'none'; return; }

    var res = indice.filter(function(item){
      return item.mun.includes(q) || item.dep.includes(q) ||
             item.plaza.includes(q) ||
             item.emps.some(function(e){ return e.toUpperCase().includes(q); });
    }).slice(0, 12);

    if(!res.length){
      divRes.innerHTML =
        '<div class="res-item">' +
        '<div class="res-nombre" style="color:#999">Sin resultados</div></div>';
      divRes.style.display = 'block';
      return;
    }

    var html = '';
    res.forEach(function(item, i){
      var empsMatch = item.emps.filter(function(e){
        return e.toUpperCase().includes(q);
      });
      var sub = item.dep + (item.plaza ? ' · Plaza: ' + item.plaza : '');
      if(empsMatch.length)
        sub += ' | 🏢 ' + empsMatch.slice(0, 2).join(', ') +
               (empsMatch.length > 2 ? ' +' + (empsMatch.length - 2) + '…' : '');
      html +=
        '<div class="res-item" data-i="' + i + '">' +
        '<div class="res-nombre">' + item.mun + '</div>' +
        '<div class="res-sub">'   + sub       + '</div></div>';
    });
    divRes.innerHTML = html;
    divRes.style.display = 'block';

    divRes.querySelectorAll('.res-item').forEach(function(el){
      el.onclick = function(){
        var i   = parseInt(this.getAttribute('data-i'));
        var tgt = res[i].layer;
        map.fitBounds(tgt.getBounds(), { maxZoom:12 });
        setTimeout(function(){ tgt.openPopup(); }, 600);
        tgt.setStyle({ color:'#FFD700', weight:4, fillOpacity:.9 });
        setTimeout(function(){ capa.resetStyle(tgt); }, 2500);
        divRes.style.display = 'none';
        inputB.value = res[i].mun + ', ' + res[i].dep;
      };
    });
  });

  document.addEventListener('click', function(e){
    if(!inputB.contains(e.target) && !divRes.contains(e.target))
      divRes.style.display = 'none';
  });

  btnClr.onclick = function(){
    inputB.value = '';
    divRes.style.display = 'none';
    inputB.focus();
  };
}

window.addEventListener('load', function(){ setTimeout(init, 1200); });
})();
</script>
</body>
</html>
